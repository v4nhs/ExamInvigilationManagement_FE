<div class="lecturer-list-container">
  <div class="page-header">
    <h2>Danh sÃ¡ch cÃ¡n bá»™ coi thi</h2>
    <div class="header-actions">
      <button class="add-btn" (click)="openAddForm()">+ ThÃªm giáº£ng viÃªn</button>
    </div>
  </div>

  <div class="search-filter-section">
    <div class="search-box">
      <i class="search-icon">ğŸ”</i>
      <input 
        type="text" 
        placeholder="TÃ¬m kiáº¿m theo há» tÃªn, tÃªn Ä‘Äƒng nháº­p..."
        [(ngModel)]="searchQuery"
        (input)="onSearchChange()"
        class="search-input"
      />
      <button *ngIf="searchQuery" class="clear-btn" (click)="clearSearch()">âœ•</button>
    </div>
  </div>

  <table *ngIf="filteredLecturers.length > 0; else emptyBlock">
    <thead>
      <tr>
        <th>#</th>
        <th>Há» tÃªn</th>
        <th>Khoa</th>
        <th>Chá»©c danh</th>
        <th>ChuyÃªn mÃ´n</th>
        <th>HÃ nh Ä‘á»™ng</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let lecturer of filteredLecturers; let i = index">
        <td>{{ currentPage * pageSize + i + 1 }}</td>
        <td><span class="lecturer-name">{{ lecturer.fullName }}</span></td>
        <td>{{ lecturer.departmentName || '-' }}</td>
        <td>{{ lecturer.academicTitle || '-' }}</td>
        <td>{{ lecturer.specialization || '-' }}</td>
        <td class="action-cell">
          <button class="edit-btn" (click)="openAddForm(lecturer.id)" [disabled]="!lecturer.id">Sá»­a</button>
          <button class="delete-btn" (click)="deleteLecturer(lecturer.id)" [disabled]="!lecturer.id || deleting === lecturer.id">
            {{ deleting === lecturer.id ? 'Äang xÃ³a...' : 'XÃ³a' }}
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #emptyBlock>
    <div class="empty">KhÃ´ng cÃ³ giáº£ng viÃªn nÃ o.</div>
  </ng-template>

  <div *ngIf="loading" class="loading">Äang táº£i...</div>

  <!-- Pagination Controls -->
  <div class="pagination-container" *ngIf="totalPages > 1 || totalElements > 0">
    <div class="pagination-header">
      <div class="pagination-info">
        Hiá»ƒn thá»‹ {{ currentPage * pageSize + 1 }} Ä‘áº¿n {{ Math.min((currentPage + 1) * pageSize, totalElements) }} 
        trÃªn tá»•ng sá»‘ {{ totalElements }} giáº£ng viÃªn
      </div>
      
      <div class="page-size-selector">
        <label for="pageSize">Hiá»ƒn thá»‹:</label>
        <select 
          id="pageSize"
          [(ngModel)]="pageSize" 
          (change)="onPageSizeChange()"
          class="page-size-select">
          <option *ngFor="let size of pageSizeOptions" [value]="size">
            {{ size }} má»¥c
          </option>
        </select>
      </div>
    </div>
    
    <div class="pagination-controls" *ngIf="totalPages > 1">
      <button 
        class="page-btn" 
        (click)="previousPage()" 
        [disabled]="currentPage === 0">
        â† TrÆ°á»›c
      </button>

      <button 
        *ngFor="let page of getPageNumbers()"
        class="page-btn"
        [class.active]="page === currentPage"
        (click)="goToPage(page)">
        {{ page + 1 }}
      </button>

      <button 
        class="page-btn" 
        (click)="nextPage()" 
        [disabled]="currentPage === totalPages - 1">
        Tiáº¿p â†’ 
      </button>
    </div>
  </div>

  <app-lecturer-add 
    *ngIf="showAddForm" 
    [editLecturerId]="editingLecturerId"
    (close)="closeAddForm()" 
    (saved)="onLecturerSaved()">
  </app-lecturer-add>
</div>
