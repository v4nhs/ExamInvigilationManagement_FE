<div class="modal-overlay" (click)="$event.target === $event.currentTarget && closeDialog()">
  <div class="modal-dialog">
    <div class="modal-header">
      <h2>{{ editDepartmentId ? 'Chỉnh sửa phòng ban' : 'Thêm phòng ban mới' }}</h2>
      <button type="button" class="close-btn" (click)="closeDialog()">
        <i class="icon-close">×</i>
      </button>
    </div>

    <div class="modal-body">
      <form *ngIf="!loading" [formGroup]="departmentForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="name">Tên phòng ban <span class="required">*</span></label>
          <input id="name" formControlName="name" type="text" placeholder="Nhập tên phòng ban" />
          <div *ngIf="departmentForm.get('name')?.invalid && departmentForm.get('name')?.touched" class="error-message">
            Tên phòng ban là bắt buộc
          </div>
        </div>

        <div class="form-group">
          <label for="code">Mã phòng ban <span class="required">*</span></label>
          <input id="code" formControlName="code" type="text" placeholder="Nhập mã phòng ban" />
          <div *ngIf="departmentForm.get('code')?.invalid && departmentForm.get('code')?.touched" class="error-message">
            Mã phòng ban là bắt buộc
          </div>
        </div>

        <div class="form-group">
          <label for="description">Mô tả</label>
          <textarea id="description" formControlName="description" placeholder="Nhập mô tả phòng ban" rows="4"></textarea>
        </div>
      </form>

      <div *ngIf="loading" class="loading-spinner">
        <div class="spinner"></div>
        <p>Đang tải dữ liệu...</p>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="cancel-btn" (click)="closeDialog()">Hủy</button>
      <button type="submit" class="submit-btn" (click)="onSubmit()" [disabled]="loading || departmentForm.invalid">
        {{ loading ? 'Đang lưu...' : editDepartmentId ? 'Cập nhật' : 'Tạo mới' }}
      </button>
    </div>
  </div>
</div>
