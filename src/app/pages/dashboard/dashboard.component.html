<div class="dashboard-container">
  <div class="dashboard-content">
    <!-- Page Header -->
    <div class="dashboard-header">
      <h1>Dashboard Tá»•ng Quan</h1>
      <p>Thá»‘ng kÃª tá»•ng quÃ¡t há»‡ thá»‘ng quáº£n lÃ½ coi thi</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Äang táº£i dá»¯ liá»‡u...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-message">
      {{ error }}
    </div>

    <!-- Statistics Cards -->
    <div *ngIf="!loading && !error" class="statistics-grid">
      <!-- Card 1: Exam Schedules -->
      <div class="stat-card exam-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <div class="stat-number">{{ totalExamSchedules }}</div>
          <div class="stat-label">Lá»‹ch Thi</div>
          <div class="stat-description">Tá»•ng sá»‘ lá»‹ch thi Ä‘Ã£ láº­p</div>
        </div>
      </div>

      <!-- Card 2: Lecturers -->
      <div class="stat-card lecturer-card">
        <div class="stat-icon">ğŸ‘¨â€ğŸ«</div>
        <div class="stat-content">
          <div class="stat-number">{{ totalLecturers }}</div>
          <div class="stat-label">Giáº£ng ViÃªn</div>
          <div class="stat-description">Tá»•ng sá»‘ giáº£ng viÃªn trong há»‡ thá»‘ng</div>
        </div>
      </div>

      <!-- Card 3: Users -->
      <div class="stat-card user-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <div class="stat-number">{{ totalUsers }}</div>
          <div class="stat-label">NgÆ°á»i DÃ¹ng</div>
          <div class="stat-description">Tá»•ng sá»‘ ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng kÃ½</div>
        </div>
      </div>

      <!-- Card 4: Departments -->
      <div class="stat-card dept-card">
        <div class="stat-icon">ğŸ¢</div>
        <div class="stat-content">
          <div class="stat-number">{{ totalDepartments }}</div>
          <div class="stat-label">Khoa/Viá»‡n</div>
          <div class="stat-description">Tá»•ng sá»‘ khoa/viá»‡n trong trÆ°á»ng</div>
        </div>
      </div>

      <!-- Card 5: Personal Exam Schedule (for Lecturers only) -->
      <div class="stat-card lecturer-schedule-card" *ngIf="isLecturer()" (click)="goToPersonalSchedule()" style="cursor: pointer;">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-content">
          <div class="stat-label">Xem Lá»‹ch Thi</div>
          <div class="stat-description">Xem lá»‹ch thi cÃ¡ nhÃ¢n cá»§a báº¡n</div>
        </div>
        <div class="stat-arrow">â†’</div>
      </div>
    </div>

    <!-- Charts Section -->
    <div *ngIf="!loading && !error" class="charts-section">
      <!-- Lecturer by Department Chart -->
      <div class="chart-container">
        <h3>ğŸ‘¨â€ğŸ« Giáº£ng ViÃªn Theo Khoa</h3>
        <div class="chart-content">
          <div *ngIf="lecturerByDeptData.length > 0; else noDeptData" class="horizontal-chart">
            <div *ngFor="let item of lecturerByDeptData; let i = index" class="chart-row">
              <div class="label">{{ item.name }}</div>
              <div class="bar-container">
                <div class="bar" [style.width.%]="item.percentage" [style.backgroundColor]="getBarColor(i)">
                  <span class="value">{{ item.value }}</span>
                </div>
              </div>
              <div class="percentage">{{ item.percentage }}%</div>
            </div>
          </div>
          <ng-template #noDeptData>
            <div class="no-data">KhÃ´ng cÃ³ dá»¯ liá»‡u giáº£ng viÃªn</div>
          </ng-template>
        </div>
      </div>

      <!-- User by Role Chart -->
      <div class="chart-container">
        <h3>ğŸ‘¥ NgÆ°á»i DÃ¹ng Theo Vai TrÃ²</h3>
        <div class="chart-content">
          <div *ngIf="userByRoleData.length > 0; else noRoleData" class="horizontal-chart">
            <div *ngFor="let item of userByRoleData; let i = index" class="chart-row">
              <div class="label">{{ item.name }}</div>
              <div class="bar-container">
                <div class="bar" [style.width.%]="item.percentage" [style.backgroundColor]="getBarColor(i)">
                  <span class="value">{{ item.value }}</span>
                </div>
              </div>
              <div class="percentage">{{ item.percentage }}%</div>
            </div>
          </div>
          <ng-template #noRoleData>
            <div class="no-data">KhÃ´ng cÃ³ dá»¯ liá»‡u ngÆ°á»i dÃ¹ng</div>
          </ng-template>
        </div>
      </div>
    </div>
</div>
